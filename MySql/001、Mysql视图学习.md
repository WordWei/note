### 视图

 视图作为一张虚拟表， 本身是不具有数据的 。 虚拟表的创建连接了一个或多个数据表，不同的查询应用都可以建立在虚拟表之上。 

![](C:\Users\Administrator\Desktop\技术积累\photo\视图.png)

####  什么是视图？如何创建、更新和删除视图？ 

 视图的这一特点，可以帮我们简化复杂的 SQL 查询， 也可以根据需要更改数据格式，返回与底层数据表格式不同的数据。 

#####  创建视图：CREATE VIEW 

```mysql
CREATE VIEW view_name AS
SELECT column1, column2
FROM table
WHERE condition
```

 在 SQL 查询语句的基础上封装了视图 VIEW，这样就会基于 SQL 语句的结果集形成一张虚拟表。 

#####  嵌套视图 

 创建好一张视图之后，还可以在它的基础上继续创建视图，称为嵌套视图。

#####  修改视图：ALTER VIEW 

```mysql
ALTER VIEW view_name AS
SELECT column1, column2
FROM table
WHERE condition
```

#####  删除视图：DROP VIEW 

```mysql
DROP VIEW view_name
```



####  如何使用视图来简化我们的 SQL 操作？ 

#####  利用视图完成复杂的连接 

复杂查询时，多张表之间需要join等操作时，可以先使用视图创建join之后的临时表，然后按照条件查询该视图即可。

#####  利用视图对数据进行格式化 

字符串拼接等数据库操作，在将多张表进行join关联后，将需要查询的指定格式的数据放在视图中，方便之后根据特定条件查询。

#####  使用视图与计算字段 

####  视图和临时表的区别是什么，它们各自有什么优缺点？ 

 	视图是虚拟表，本身不存储数据，如果想要通过视图对底层数据表的数据进行修改也会受到很多限制，通常我们是把视图用于查询，也就是对 SQL 查询的一种封装。 

​	 它和临时表又有什么区别呢？在实际工作中，我们可能会见到各种临时数据。比如你可能会问，如果我在做一个电商的系统，中间会有个购物车的功能，需要临时统计购物车中的商品和金额，那该怎么办呢？这里就需要用到临时表了，临时表是真实存在的数据表，不过它不用于长期存放数据，只为当前连接存在，关闭连接后，临时表就会自动释放。 

优点：

- 安全性：虚拟表是基于底层数据表的，我们在使用视图时，一般不会轻易通过视图对底层数据进行修改，即使是使用单表的视图，也会受到限制，比如计算字段，类型转换等是无法通过视图来对底层数据进行修改的，这也在一定程度上保证了数据表的数据安全性。同时，我们还可以针对不同用户开放不同的数据查询权限，比如人员薪酬是个敏感的字段，那么只给某个级别以上的人员开放，其他人的查询视图中则不提供这个字段。
- 简单清晰：视图是对 SQL 查询的封装，它可以将原本复杂的 SQL 查询简化，在编写好查询之后，我们就可以直接重用它而不必要知道基本的查询细节。同时我们还可以在视图之上再嵌套视图。这样就好比我们在进行模块化编程一样，不仅结构清晰，还提升了代码的复用率。 

####  视图的作用 

-  视图隐藏了底层的表结构，简化了数据访问操作，客户端不再需要知道底层表的结构及其之间的关系。 

-  视图提供了一个统一访问数据的接口。（即可以允许用户通过视图访问数据的安全机制，而不授予用户直接访问底层表的权限），从而加强了安全性，使用户只能看到视图所显示的数据。 

-  视图还可以被嵌套，一个视图中可以嵌套另一个视图。 

  注意： 视图总是显示最新的数据！每当用户查询视图时，数据库引擎通过使用视图的 SQL 语句重建数据。 